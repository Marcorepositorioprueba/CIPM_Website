<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulador de Escenarios Socioeconómicos - CIPM</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="assets/styles.css">
    <link rel="stylesheet" href="assets/sub_menu_styles.css">
    <style>
        body {
            background-color: #e0e5ec;
            font-family: 'Roboto', sans-serif;
            margin: 0;
            background-image: url('imagenes/efig2.jpg');
            background-size: cover;
            background-position: center center;
            background-attachment: fixed;
        }
        .site-header .top-bar {
            background-color: #ffffff;
            text-align: center;
            padding: 15px 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .site-header .logo {
            max-height: 70px;
        }

        .main-content { max-width: 900px; margin: 2rem auto; padding: 2rem; }
        .simulator-container { background: #ffffff; border-radius: 20px; padding: 30px; box-shadow: 10px 10px 30px #bebebe, -10px -10px 30px #ffffff; }
        .simulator-header { text-align: center; margin-bottom: 30px; }
        .simulator-header h1 { font-size: 2.2rem; color: #003366; }
        .simulator-header p { color: #555; font-size: 1.1rem; }

        .form-group { margin-bottom: 20px; }
        .form-group label { display: block; font-weight: 600; color: #333; margin-bottom: 8px; }
        .form-group select, .form-group input { width: 100%; box-sizing: border-box; padding: 12px; border: 1px solid #ccc; border-radius: 8px; font-size: 1rem; }

        .simulate-btn { display: block; width: 100%; padding: 15px; border: none; border-radius: 12px; background: #007bff; color: white; font-size: 1.3rem; font-weight: 700; cursor: pointer; transition: background-color 0.3s ease; margin-top: 20px; }
        .simulate-btn:hover { background: #0056b3; }

        #results-section { margin-top: 30px; display: none; }
        .indicators-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .indicator-card { background: #f8f9fa; padding: 15px; border-radius: 10px; text-align: center; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .indicator-card h4 { margin: 0 0 10px 0; color: #003366; }
        .indicator-card .value-before, .indicator-card .value-after { font-size: 1.2rem; font-weight: bold; }
        .indicator-card .value-before { color: #6c757d; text-decoration: line-through; }
        .indicator-card .value-after.positive { color: #28a745; }
        .indicator-card .value-after.negative { color: #dc3545; }
        .indicator-card .value-after.neutral { color: #007bff; }

        .chart-container { margin-top: 20px; }
    </style>
</head>
<body>
    <header class="site-header">
        <div class="top-bar">
            <img src="imagenes/logo_cipm.png" alt="CIPM Logo" class="logo">
        </div>
        <nav class="toolbox-nav">
            <a href="caja_herramientas.html" class="back-link">❮ Caja de Herramientas</a>
            <div class="nav-links-container">
                <a href="caja_herramientas.html#eficiencia-administracion">Eficiencia en la administración</a>
                <a href="caja_herramientas.html#laboratorio-finanzas">Laboratorio de finanzas y proyectos</a>
                <a href="caja_herramientas.html#estrategia-comunicacion">Estrategia y comunicación política</a>
                <a href="caja_herramientas.html#unidad-analisis" class="active">Unidad de análisis e investigación</a>
            </div>
        </nav>
    </header>

    <main class="main-content">
        <div class="simulator-container">
            <div class="simulator-header">
                <h1>Simulador de Escenarios Socioeconómicos</h1>
                <p>Proyecte el impacto de diferentes políticas públicas en indicadores clave.</p>
            </div>

            <div class="form-group">
                <label for="municipio-select">Municipio</label>
                <select id="municipio-select">
                    <option value="Acatlán">Acatlán</option><option value="Acaxochitlán">Acaxochitlán</option><option value="Actopan">Actopan</option><option value="Agua Blanca de Iturbide">Agua Blanca de Iturbide</option><option value="Ajacuba">Ajacuba</option><option value="Alfajayucan">Alfajayucan</option><option value="Almoloya">Almoloya</option><option value="Apan">Apan</option><option value="Atitalaquia">Atitalaquia</option><option value="Atlapexco">Atlapexco</option><option value="Atotonilco el Grande">Atotonilco el Grande</option><option value="Atotonilco de Tula">Atotonilco de Tula</option><option value="Calnali">Calnali</option><option value="Cardonal">Cardonal</option><option value="Cuautepec de Hinojosa">Cuautepec de Hinojosa</option><option value="Chapantongo">Chapantongo</option><option value="Chapulhuacán">Chapulhuacán</option><option value="Chilcuautla">Chilcuautla</option><option value="El Arenal">El Arenal</option><option value="Eloxochitlán">Eloxochitlán</option><option value="Emiliano Zapata">Emiliano Zapata</option><option value="Epazoyucan">Epazoyucan</option><option value="Francisco I. Madero">Francisco I. Madero</option><option value="Huasca de Ocampo">Huasca de Ocampo</option><option value="Huautla">Huautla</option><option value="Huazalingo">Huazalingo</option><option value="Huehuetla">Huehuetla</option><option value="Huejutla de Reyes">Huejutla de Reyes</option><option value="Huichapan">Huichapan</option><option value="Ixmiquilpan">Ixmiquilpan</option><option value="Jacala de Ledezma">Jacala de Ledezma</option><option value="Jaltocán">Jaltocán</option><option value="Juárez Hidalgo">Juárez Hidalgo</option><option value="La Misión">La Misión</option><option value="Lolotla">Lolotla</option><option value="Metepec">Metepec</n><option value="Metztitlán">Metztitlán</option><option value="Mineral del Chico">Mineral del Chico</option><option value="Mineral del Monte">Mineral del Monte</option><option value="Mineral de la Reforma">Mineral de la Reforma</option><option value="Mixquiahuala de Juárez">Mixquiahuala de Juárez</option><option value="Molango de Escamilla">Molango de Escamilla</option><option value="Nicolás Flores">Nicolás Flores</option><option value="Nopala de Villagrán">Nopala de Villagrán</option><option value="Omitlán de Juárez">Omitlán de Juárez</option><option value="Pacula">Pacula</option><option value="Pachuca de Soto">Pachuca de Soto</option><option value="Pisaflores">Pisaflores</option><option value="Progreso de Obregón">Progreso de Obregón</option><option value="San Agustín Metzquititlán">San Agustín Metzquititlán</option><option value="San Agustín Tlaxiaca">San Agustín Tlaxiaca</option><option value="San Bartolo Tutotepec">San Bartolo Tutotepec</option><option value="San Felipe Orizatlán">San Felipe Orizatlán</option><option value="San Salvador">San Salvador</option><option value="Santiago de Anaya">Santiago de Anaya</option><option value="Santiago Tulantepec de Lugo Guerrero">Santiago Tulantepec de Lugo Guerrero</option><option value="Singuilucan">Singuilucan</option><option value="Tasquillo">Tasquillo</option><option value="Tecozautla">Tecozautla</option><option value="Tenango de Doria">Tenango de Doria</option><option value="Tepeapulco">Tepeapulco</option><option value="Tepehuacán de Guerrero">Tepehuacán de Guerrero</option><option value="Tepeji del Río de Ocampo">Tepeji del Río de Ocampo</option><option value="Tepetitlán">Tepetitlán</option><option value="Tetepango">Tetepango</option><option value="Tezontepec de Aldama">Tezontepec de Aldama</option><option value="Tianguistengo">Tianguistengo</option><option value="Tizayuca">Tizayuca</option><option value="Tlahuelilpan">Tlahuelilpan</option><option value="Tlahuiltepa">Tlahuiltepa</option><option value="Tlanalapa">Tlanalapa</option><option value="Tlanchinol">Tlanchinol</option><option value="Tlaxcoapan">Tlaxcoapan</option><option value="Tolcayuca">Tolcayuca</option><option value="Tula de Allende">Tula de Allende</option><option value="Tulancingo de Bravo">Tulancingo de Bravo</option><option value="Villa de Tezontepec">Villa de Tezontepec</option><option value="Xochiatipan">Xochiatipan</option><option value="Xochicoatlán">Xochicoatlán</option><option value="Yahualica">Yahualica</option><option value="Zacualtipán de Ángeles">Zacualtipán de Ángeles</option><option value="Zapotlán de Juárez">Zapotlán de Juárez</option><option value="Zempoala">Zempoala</option><option value="Zimapán">Zimapán</option>
                </select>
            </div>

            <div class="form-group">
                <label for="policy-select">Seleccione la Política Pública a Simular</label>
                <select id="policy-select">
                    <option value="impuesto_predial_aumento">Aumento del Impuesto Predial (5%)</option>
                    <option value="inversion_infraestructura">Inversión en Infraestructura (10% del presupuesto)</option>
                    <option value="programa_empleo">Programa de Fomento al Empleo</option>
                    <option value="subsidio_servicios">Subsidio a Servicios Básicos</option>
                </select>
            </div>

            <button id="simulate-btn" class="simulate-btn">Simular Impacto</button>

            <div id="results-section">
                <h3>Impacto Proyectado:</h3>
                <div class="indicators-grid">
                    <div class="indicator-card">
                        <h4>Empleo (%)</h4>
                        <p>Antes: <span id="empleo-before"></span></p>
                        <p>Después: <span id="empleo-after"></span></p>
                    </div>
                    <div class="indicator-card">
                        <h4>Ingreso per cápita ($)</h4>
                        <p>Antes: <span id="ingreso-before"></span></p>
                        <p>Después: <span id="ingreso-after"></span></p>
                    </div>
                    <div class="indicator-card">
                        <h4>Inflación Local (%)</h4>
                        <p>Antes: <span id="inflacion-before"></span></p>
                        <p>Después: <span id="inflacion-after"></span></p>
                    </div>
                </div>
                <div class="chart-container">
                    <canvas id="socioeconomic-chart"></canvas>
                </div>
            </div>
        </div>
    </main>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const simulateBtn = document.getElementById('simulate-btn');
            const municipioSelect = document.getElementById('municipio-select');
            const policySelect = document.getElementById('policy-select');
            const resultsSection = document.getElementById('results-section');

            const empleoBefore = document.getElementById('empleo-before');
            const empleoAfter = document.getElementById('empleo-after');
            const ingresoBefore = document.getElementById('ingreso-before');
            const ingresoAfter = document.getElementById('ingreso-after');
            const inflacionBefore = document.getElementById('inflacion-before');
            const inflacionAfter = document.getElementById('inflacion-after');

            let socioeconomicChart;

            const municipios = ["Acatlán", "Acaxochitlán", "Actopan", "Agua Blanca de Iturbide", "Ajacuba", "Alfajayucan", "Almoloya", "Apan", "Atitalaquia", "Atlapexco", "Atotonilco el Grande", "Atotonilco de Tula", "Calnali", "Cardonal", "Cuautepec de Hinojosa", "Chapantongo", "Chapulhuacán", "Chilcuautla", "El Arenal", "Eloxochitlán", "Emiliano Zapata", "Epazoyucan", "Francisco I. Madero", "Huasca de Ocampo", "Huautla", "Huazalingo", "Huehuetla", "Huejutla de Reyes", "Huichapan", "Ixmiquilpan", "Jacala de Ledezma", "Jaltocán", "Juárez Hidalgo", "La Misión", "Lolotla", "Metepec", "Metztitlán", "Mineral del Chico", "Mineral del Monte", "Mineral de la Reforma", "Mixquiahuala de Juárez", "Molango de Escamilla", "Nicolás Flores", "Nopala de Villagrán", "Omitlán de Juárez", "Pacula", "Pachuca de Soto", "Pisaflores", "Progreso de Obregón", "San Agustín Metzquititlán", "San Agustín Tlaxiaca", "San Bartolo Tutotepec", "San Felipe Orizatlán", "San Salvador", "Santiago de Anaya", "Santiago Tulantepec de Lugo Guerrero", "Singuilucan", "Tasquillo", "Tecozautla", "Tenango de Doria", "Tepeapulco", "Tepehuacán de Guerrero", "Tepeji del Río de Ocampo", "Tepetitlán", "Tetepango", "Tezontepec de Aldama", "Tianguistengo", "Tizayuca", "Tlahuelilpan", "Tlahuiltepa", "Tlanalapa", "Tlanchinol", "Tlaxcoapan", "Tolcayuca", "Tula de Allende", "Tulancingo de Bravo", "Villa de Tezontepec", "Xochiatipan", "Xochicoatlán", "Yahualica", "Zacualtipán de Ángeles", "Zapotlán de Juárez", "Zempoala", "Zimapán"];

            function populateSelect(selectElement, options) {
                options.forEach(optionText => {
                    const option = document.createElement('option');
                    option.value = optionText;
                    option.textContent = optionText;
                    selectElement.appendChild(option);
                });
            }

            populateSelect(municipioSelect, municipios);

            const baseIndicators = {
                empleo: 50, // % de población empleada
                ingreso: 15000, // Ingreso per cápita mensual
                inflacion: 5 // % anual
            };

            const policyImpacts = {
                impuesto_predial_aumento: {
                    empleo: -2, // Baja 2%
                    ingreso: -500, // Baja $500
                    inflacion: 1 // Sube 1%
                },
                inversion_infraestructura: {
                    empleo: 3, // Sube 3%
                    ingreso: 800, // Sube $800
                    inflacion: 0.5 // Sube 0.5%
                },
                programa_empleo: {
                    empleo: 5, // Sube 5%
                    ingreso: 1000, // Sube $1000
                    inflacion: 0 // Sin cambio
                },
                subsidio_servicios: {
                    empleo: 0, // Sin cambio
                    ingreso: 300, // Sube $300
                    inflacion: -0.5 // Baja 0.5%
                }
            };

            simulateBtn.addEventListener('click', () => {
                const selectedPolicy = policySelect.value;
                const impacts = policyImpacts[selectedPolicy];

                const newEmpleo = baseIndicators.empleo + impacts.empleo;
                const newIngreso = baseIndicators.ingreso + impacts.ingreso;
                const newInflacion = baseIndicators.inflacion + impacts.inflacion;

                empleoBefore.textContent = `${baseIndicators.empleo}%`;
                empleoAfter.textContent = `${newEmpleo}%`;
                empleoAfter.className = `value-after ${impacts.empleo > 0 ? 'positive' : (impacts.empleo < 0 ? 'negative' : 'neutral')}`;

                ingresoBefore.textContent = `$${baseIndicators.ingreso.toLocaleString()}`;
                ingresoAfter.textContent = `$${newIngreso.toLocaleString()}`; 
                ingresoAfter.className = `value-after ${impacts.ingreso > 0 ? 'positive' : (impacts.ingreso < 0 ? 'negative' : 'neutral')}`;

                inflacionBefore.textContent = `${baseIndicators.inflacion}%`;
                inflacionAfter.textContent = `${newInflacion}%`;
                inflacionAfter.className = `value-after ${impacts.inflacion < 0 ? 'positive' : (impacts.inflacion > 0 ? 'negative' : 'neutral')}`;

                // Update Chart
                const ctx = document.getElementById('socioeconomic-chart').getContext('2d');
                if (socioeconomicChart) socioeconomicChart.destroy();

                socioeconomicChart = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: ['Empleo', 'Ingreso per cápita', 'Inflación Local'],
                        datasets: [
                            {
                                label: 'Antes',
                                data: [baseIndicators.empleo, baseIndicators.ingreso / 1000, baseIndicators.inflacion],
                                backgroundColor: 'rgba(54, 162, 235, 0.6)'
                            },
                            {
                                label: 'Después',
                                data: [newEmpleo, newIngreso / 1000, newInflacion],
                                backgroundColor: 'rgba(75, 192, 192, 0.6)'
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        plugins: { title: { display: true, text: 'Comparativa de Indicadores Socioeconómicos' } },
                        scales: {
                            y: {
                                beginAtZero: true
                            }
                        }
                    }
                });

                resultsSection.style.display = 'block';
            });
        });
    </script>
</body>
</html>